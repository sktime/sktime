# adapted from
# - https://github.com/scikit-hep/azure-wheel-helpers/blob/master/azure-manylinux-wheels.yml

steps:
- script: |
    docker run --rm \
      -e NPY_NUM_BUILD_JOBS=4 \
      -e PLAT="$(plat)" \
      -e package_name="$(package_name)" \
      -e requirements="$(requirements)" \
#      -e test_requirements_file='$(test_requirements_file)' \
      -v "$Build.SourcesDirectory":/io \
      "$(image)" \
      /io/build_tools/azure/build-wheels.sh
  displayName: Build wheels

- script: |
    ls -lh wheelhouse/
    mkdir -p dist
    cp wheelhouse/"$(package_name)"*.whl dist/.
  displayName: Show and copy wheels